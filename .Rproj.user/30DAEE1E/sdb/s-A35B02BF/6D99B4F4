{
    "collab_server" : "",
    "contents" : "library(dplyr)\nlibrary(readr)\nlibrary(purrr)\nlibrary(srvyr)\n\ninmigration <- read_csv(\"usa_00010.csv.gz\") %>%\n  mutate(geogroup =ifelse(PUMARES2MIG==14, \"Hennepin\", \n                          ifelse(PUMARES2MIG==13, \"Ramsey\", \"All Other Counties\")),\n         agegroup = ifelse(AGE<17, \"16 and Younger\",\n                           ifelse(AGE>=17 & AGE<24, \"17 to 23\",\n                                  ifelse(AGE>=24 & AGE<31, \"24 to 30\", \"31 and Over\")\n                           )\n         ),\n         moved = ifelse(!(MIGPLAC1 %in% c(0,27) & MIGPLAC1<100), 1, 0) \n  ) %>%\n  as_survey_design(weights=PERWT) %>%\n  group_by(PUMARES2MIG, agegroup) %>%\n  summarise(moved_in = survey_total(moved))\n\n######################################\n######### Map Net Migration ##########\n######################################\n\n#load packages to use\nlibrary(rgdal)\nlibrary(ggplot2)\n\n\n#Read in shapefile for MigPumas\nif (!file.exists(\"shapefile.rda\")) {\n  shapefile <- readOGR(\"./shapefile\", \"ipums_migpuma_pwpuma_2010\")\n  shapefile <- shapefile[shapefile@data$STATEFIP==\"27\",]\n  save(shapefile, file=\"shapefile.rda\")\n} else {\n  load(\"shapefile.rda\")\n}\n\n\n\n\nmnmap <- fortify(shapefile)\n\nggplot() + \n  geom_polygon(data=mnmap,\n               aes(long, lat, group=group),\n               fill=\"white\",\n               color=\"black\") +\n  coord_equal()",
    "created" : 1498514047221.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "560861401",
    "id" : "6D99B4F4",
    "lastKnownWriteTime" : 1498514394,
    "last_content_update" : 1498514395362,
    "path" : "I:/User/Williams/Data Assistance/mnmigration/mapmigpumas.R",
    "project_path" : "mapmigpumas.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 1,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}